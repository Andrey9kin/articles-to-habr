–û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ React —Å –ø–æ–º–æ—â—å—é Sentry

![](https://habrastorage.org/webt/-t/ew/vi/-tewvivn2k2sfdneybtnpssi06s.png)

–°–µ–≥–æ–¥–Ω—è —è —Ä–∞—Å—Å–∫–∞–∂—É –≤–∞–º –æ–± –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –æ—à–∏–±–æ–∫ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ React. –ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–Ω–µ—à–Ω–µ–≥–æ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞ –æ–±—ã—á–Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫. –ù–µ–∫–æ—Ç–æ—Ä—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏ —á–∞—Å—Ç–æ –æ—Ç–∫–ª–∞–¥—ã–≤–∞—é—Ç –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –æ—à–∏–±–æ–∫, –≤–æ–∑–≤—Ä–∞—â–∞—è—Å—å –∫ –Ω–µ–º—É –ø–æ—Å–ª–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏, —Ç–µ—Å—Ç–æ–≤ –∏ –ø—Ä–æ—á–µ–≥–æ. –û–¥–Ω–∞–∫–æ, –µ—Å–ª–∏ –≤—ã –º–æ–∂–µ—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ–¥—É–∫—Ç –≤ –ª—É—á—à—É—é —Å—Ç–æ—Ä–æ–Ω—É, —Ç–æ –ø—Ä–æ—Å—Ç–æ —Å–¥–µ–ª–∞–π—Ç–µ —ç—Ç–æ!



### **1. –ó–∞—á–µ–º –≤–∞–º –Ω—É–∂–µ–Ω Sentry?**

–Ø –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞—é, —á—Ç–æ –≤—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–∏ –æ—à–∏–±–æ–∫ –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞

–í—ã –¥—É–º–∞–µ—Ç–µ, —á—Ç–æ —ç—Ç–æ–≥–æ –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ? üòÑ

–•–æ—Ä–æ—à–æ, –¥–∞–≤–∞–π—Ç–µ –ø–æ—Å–º–æ—Ç—Ä–∏–º –Ω–∞ –¥–µ—Ç–∞–ª–∏.



**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è Sentry –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤:**

- –ü–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–∞–≤–ª—è—Ç—å—Å—è –æ—Ç —Ä–∏—Å–∫–æ–≤ –ø—Ä–∏ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–∏ –∫–æ–¥–∞ —Å –æ—à–∏–±–∫–∞–º–∏
- –ü–æ–º–æ—â—å QA –≤ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏ –∫–æ–¥–∞
- –ü–æ–ª—É—á–µ–Ω–∏–µ –±—ã—Å—Ç—Ä—ã—Ö —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π –æ –ø—Ä–æ–±–ª–µ–º–∞—Ö
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –±—ã—Å—Ç—Ä–æ–≥–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –æ—à–∏–±–æ–∫
- –ü–æ–ª—É—á–µ–Ω–∏–µ —É–¥–æ–±–Ω–æ–≥–æ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫ –≤ –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏
- –°–æ—Ä—Ç–∏—Ä–æ–≤–∫–∞ –æ—à–∏–±–æ–∫ –ø–æ —Å–µ–≥–º–µ–Ω—Ç–∞–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è / –±—Ä–∞—É–∑–µ—Ä–∞

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã –¥–ª—è CEO / Lead –ø—Ä–æ–µ–∫—Ç–∞**

- **–≠–∫–æ–Ω–æ–º–∏—è –¥–µ–Ω–µ–≥ (–û–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞—é —á—Ç–æ Sentry –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö)**
- –ü–æ–ª—É—á–µ–Ω–∏–µ –æ—Ç–∑—ã–≤–æ–≤ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ —Ç–æ–≥–æ, —á—Ç–æ –Ω–µ —Ç–∞–∫ —Å –≤–∞—à–∏–º –ø—Ä–æ–µ–∫—Ç–æ–º –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–Ω–∏–º–∞–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–æ–±–ª–µ–º, –≤–æ–∑–Ω–∏–∫–∞—é—â–∏—Ö —É –ª—é–¥–µ–π —Å –≤–∞—à–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º
- –ü–æ–º–æ—â—å –≤ –ø–æ–∏—Å–∫–µ –º–µ—Å—Ç, –≥–¥–µ –≤–∞—à–∏ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –¥–æ–ø—É—Å—Ç–∏–ª–∏ –æ–ø–ª–æ—à–Ω–æ—Å—Ç—å

–Ø –¥—É–º–∞—é, —á—Ç–æ —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∏ –±—ã–ª–∏ –±—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ –≤ –ø–µ—Ä–≤—É—é –æ—á–µ—Ä–µ–¥—å. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —ç—Ç–æ—Ç —Å–ø–∏—Å–æ–∫ –ø—Ä–∏—á–∏–Ω, —á—Ç–æ–±—ã —É–±–µ–¥–∏—Ç—å –Ω–∞—á–∞–ª—å—Å—Ç–≤–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry.

üí° –ë—É–¥—å—Ç–µ –æ—Å—Ç–æ—Ä–æ–∂–Ω—ã —Å –ø–æ—Å–ª–µ–¥–Ω–∏–º –ø—É–Ω–∫—Ç–æ–º –≤ —Å–ø–∏—Å–∫–µ –¥–ª—è –±–∏–∑–Ω–µ—Å–∞. üòÑ

–í—ã —É–∂–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã?

![](https://habrastorage.org/webt/nt/8k/9e/nt8k9elciiwzwczfvysxh48_y7m.gif)

### –ß—Ç–æ —Ç–∞–∫–æ–µ Sentry?

Sentry ‚Äì —ç—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ —Å –æ—Ç–∫—Ä—ã—Ç—ã–º –∏—Å—Ö–æ–¥–Ω—ã–º –∫–æ–¥–æ–º, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–º–æ–≥–∞–µ—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å, –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å —Å–±–æ–∏ –≤ —Ä–µ–∂–∏–º–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏. –ù–µ –∑–∞–±—ã–≤–∞–π—Ç–µ –∏ –æ —Ç–æ–º, —á—Ç–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–≤—ã—à–∞—Ç—å —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ –∏ —É–ª—É—á—à–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ. Sentry –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç JavaScript, Node, Python, PHP, Ruby, Java –∏ –¥—Ä—É–≥–∏–µ —è–∑—ã–∫–∏ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è.

![](https://habrastorage.org/webt/1x/ab/or/1xaboredev5ekhehmvwxmkuhbtk.gif)

### **2. –í–æ–π–¥–∏—Ç–µ –∏ —Å–æ–∑–¥–∞–π—Ç–µ –ø—Ä–æ–µ–∫—Ç**

- –û—Ç–∫—Ä–æ–π—Ç–µ –≤–∞—à Sentry –∞–∫–∫–∞—É–Ω—Ç. –í–æ–∑–º–æ–∂–Ω–æ, –≤–∞–º –ø—Ä–∏–¥–µ—Ç—Å—è –≤–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É. (–û–±—Ä–∞—â–∞—é –≤–Ω–∏–º–∞—é —á—Ç–æ Sentry –º–æ–∂–Ω–æ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –Ω–∞ –≤–∞—à–∏—Ö —Å–µ—Ä–≤–µ—Ä–∞—Ö)
- –°–ª–µ–¥—É—é—â–∏–π —à–∞–≥ —Å–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç
- –í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—à —è–∑—ã–∫ –∏–∑ —Å–ø–∏—Å–∫–∞. (–ú—ã —Å–æ–±–∏—Ä–∞–µ–º—Å—è –≤—ã–±—Ä–∞—Ç—å React. –ù–∞–∂–º–∏—Ç–µ ¬´–°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç¬ª)

![](https://habrastorage.org/webt/bt/_x/qf/bt_xqfkh5sjtl-t_xh-o_wbriau.gif)

–ù–∞—Å—Ç—Ä–æ–π—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ. –ë–∞–∑–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä, –∫–∞–∫ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å Sentry –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä, –≤—ã –º–æ–∂–µ—Ç–µ —É–≤–∏–¥–µ—Ç—å –Ω–∏–∂–µ:

```react

import * as Sentry from '@sentry/browser';
// Sentry.init({
//  dsn: "<https://63bbb258ca4346139ee533576e17ac46@sentry.io/1432138>"
// });
// should have been called before using it here
// ideally before even rendering your react app 

class ExampleBoundary extends Component {
    constructor(props) {
        super(props);
        this.state = { error: null };
    }

    componentDidCatch(error, errorInfo) {
      this.setState({ error });
      Sentry.withScope(scope => {
        Object.keys(errorInfo).forEach(key => {
          scope.setExtra(key, errorInfo[key]);
        });
        Sentry.captureException(error);
      });
    }

    render() {
        if (this.state.error) {
            //render fallback UI
            return (
              <a onClick={() => Sentry.showReportDialog()}>Report feedback</a>
            );
        } else {
            //when there's not an error, render children untouched
            return this.props.children;
        }
    }
}
```



–í Sentry –µ—Å—Ç—å –ø–æ–ª–µ–∑–Ω—ã–π –ú–∞—Å—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–º–æ–∂–µ—Ç –≤–∞–º –ø–æ–Ω—è—Ç—å, —á—Ç–æ –≤—ã –¥–æ–ª–∂–Ω—ã –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ. –í—ã –º–æ–∂–µ—Ç–µ –≤—ã–ø–æ–ª–Ω–∏—Ç—å —Å–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏. –Ø —Ö–æ—á—É –ø–æ–∫–∞–∑–∞—Ç—å –≤–∞–º, –∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å –ø–µ—Ä–≤—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –æ—à–∏–±–æ–∫. –û—Ç–ª–∏—á–Ω–æ, –º—ã —Å–æ–∑–¥–∞–ª–∏ –ø—Ä–æ–µ–∫—Ç! –ü–µ—Ä–µ–π–¥–µ–º –∫ —Å–ª–µ–¥—É—é—â–µ–º—É —à–∞–≥—É



### **3. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è React –∏ Sentry**

–í—ã –¥–æ–ª–∂–Ω—ã —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å npm –ø–∞–∫–µ—Ç –≤ –≤–∞—à –ø—Ä–æ–µ–∫—Ç.

```
npm i @sentry/browser
```

–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ Sentry –≤ –≤–∞—à–µ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

```
Sentry.init({
 // dsn: #dsnUrl,
});
```

DSN –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ Projects -> Settings -> Client Keys. –í—ã –º–æ–∂–µ—Ç–µ –Ω–∞–π—Ç–∏ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–µ –∫–ª—é—á–∏ –≤ —Å—Ç—Ä–æ–∫–µ –ø–æ–∏—Å–∫–∞.

![](https://habrastorage.org/webt/uo/nt/th/uontthv64gezpslxvaumxcipe9u.gif)

```
componentDidCatch(error, errorInfo) {
  Sentry.withScope(scope => {
    Object.keys(errorInfo).forEach(key => {
      scope.setExtra(key, errorInfo[key]);
    });
    Sentry.captureException(error);
 });
}
```



### **4. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –æ—à–∏–±–∫–∏**

–Ø –Ω–∞–ø—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –ø—Ä–æ—Å—Ç–æ–µ –º—É–∑—ã–∫–∞–ª—å–Ω–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å API Deezer. –í—ã –º–æ–∂–µ—Ç–µ –≤–∏–¥–µ—Ç—å —ç—Ç–æ [–∑–¥–µ—Å—å](https://nozhenkod.github.io/sentry-music-app/). –ù–∞–º –Ω—É–∂–Ω–æ —Å–æ–∑–¥–∞—Ç—å –æ—à–∏–±–∫—É. –û–¥–Ω–∏–º –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ —è–≤–ª—è–µ—Ç—Å—è –æ–±—Ä–∞—â–µ–Ω–∏–µ –∫ —Å–≤–æ–π—Å—Ç–≤—É "undefined"

–ú—ã –¥–æ–ª–∂–Ω—ã —Å–æ–∑–¥–∞—Ç—å –∫–Ω–æ–ø–∫—É, –∫–æ—Ç–æ—Ä–∞—è –≤—ã–∑—ã–≤–∞–µ—Ç **console.log** —Å **user.email**. –ü–æ—Å–ª–µ —ç—Ç–æ–≥–æ –¥–µ–π—Å—Ç–≤–∏—è –º—ã –¥–æ–ª–∂–Ω—ã –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ –æ–± –æ—à–∏–±–∫–µ: *Uncaught TypeError (–Ω–µ —É–¥–∞–µ—Ç—Å—è –ø—Ä–æ—á–∏—Ç–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–æ –∏–∑ –Ω–µ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–≥–æ `email`)* –∏–∑-–∑–∞ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏—è –æ–±—ä–µ–∫—Ç–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è. –í—ã —Ç–∞–∫–∂–µ –º–æ–∂–µ—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å **–∏—Å–∫–ª—é—á–µ–Ω–∏–µ Javascript**.

```javascript
<button type="button" onClick={() => console.log(user.email)}>   
  Test Error button 
</button>
```



–í–µ—Å—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

```
import React, { Component } from "react";
import { connect } from "react-redux";
import { Input, List, Skeleton, Avatar } from "antd";
import * as Sentry from "@sentry/browser";
import getList from "../store/actions/getList";

const Search = Input.Search;

const mapState = state => ({
  list: state.root.list,
  loading: state.root.loading
});

const mapDispatch = {
  getList
};

class Container extends Component {
  constructor(props) {
    super(props);

    Sentry.init({
      dsn: "https://fc0edcf6927a4397855797a033f04085@sentry.io/1417586",
    });
  }

  componentDidCatch(error, errorInfo) {
    Sentry.withScope(scope => {
      Object.keys(errorInfo).forEach(key => {
        scope.setExtra(key, errorInfo[key]);
      });
      Sentry.captureException(error);
    });
  }
  render() {
    const { list, loading, getList } = this.props;
    const user = undefined;
    return (
      <div className="App">
        <button
          type="button"
          onClick={() => console.log(user.email)}
        >
          test error1
        </button>
        <div onClick={() => Sentry.showReportDialog()}>Report feedback1</div>
        <h1>Music Finder</h1>
        <br />
        <Search onSearch={value => getList(value)} enterButton />
        {loading && <Skeleton avatar title={false} loading={true} active />}
        {!loading && (
          <List
            itemLayout="horizontal"
            dataSource={list}
            locale={{ emptyText: <div /> }}
            renderItem={item => (
              <List.Item>
                <List.Item.Meta
                  avatar={<Avatar src={item.artist.picture} />}
                  title={item.title}
                  description={item.artist.name}
                />
              </List.Item>
            )}
          />
        )}
      </div>
    );
  }
}

export default connect(
  mapState,
  mapDispatch
)(Container);
```



–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —ç—Ç–æ–π –∫–Ω–æ–ø–∫–∏ –≤—ã –¥–æ–ª–∂–Ω—ã –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –µ–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ.

![](https://habrastorage.org/webt/kh/5u/uu/kh5uuufshgbzeqeivguoon9lru0.gif)

–£ –Ω–∞—Å –µ—Å—Ç—å –ø–µ—Ä–≤–∞—è –æ—à–∏–±–∫–∞

![](https://habrastorage.org/webt/0u/qy/he/0uqyhehsi9rlogf6acfi7tukfie.png)

Whoo-hoo! üéâ üéâ üéâ

![](https://habrastorage.org/webt/hj/o3/wb/hjo3wbg_rsiviz22-glusyr8rng.gif)

–ï—Å–ª–∏ –≤—ã –Ω–∞–∂–º–µ—Ç–µ –Ω–∞ –æ—à–∏–±–∫—É –∑–∞–≥–æ–ª–æ–≤–∫–∞, –≤—ã —É–≤–∏–¥–∏—Ç–µ —Ç—Ä–∞—Å—Å–∏—Ä–æ–≤–∫—É —Å—Ç–µ–∫–∞.

![](https://habrastorage.org/webt/pz/nz/je/pznzjeyxt3f9xrv4ua4hnro5mam.png)

–°–æ–æ–±—â–µ–Ω–∏—è –≤—ã–≥–ª—è–¥—è—Ç –ø–ª–æ—Ö–æ. –ö–æ–Ω–µ—á–Ω–æ, –º—ã –≤–∏–¥–µ–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö, –Ω–µ –ø–æ–Ω–∏–º–∞—è, –≥–¥–µ —ç—Ç–æ—Ç –∫–æ–¥. –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é —Ä–µ—á—å –∏–¥–µ—Ç –æ–± –∏—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Ä—Ç–µ –≤ ReactJS, –ø–æ—Ç–æ–º—É —á—Ç–æ –æ–Ω–∏ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã.

–Ø —Ç–∞–∫–∂–µ —Ö–æ—Ç–µ–ª –±—ã –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–∏—Ç—å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –∏—Å—Ö–æ–¥–Ω–æ–π –∫–∞—Ä—Ç—ã, –Ω–æ —ç—Ç–æ —Å–¥–µ–ª–∞–ª–æ –±—ã —ç—Ç—É —Å—Ç–∞—Ç—å—é –Ω–∞–º–Ω–æ–≥–æ –¥–ª–∏–Ω–Ω–µ–µ, —á–µ–º —è –ø–ª–∞–Ω–∏—Ä–æ–≤–∞–ª.

–í—ã –º–æ–∂–µ—Ç–µ –∏–∑—É—á–∏—Ç—å —ç—Ç—É —Ç–µ–º—É [–∑–¥–µ—Å—å](https://docs.sentry.io/platforms/javascript/?platform=react#source-maps). –ï—Å–ª–∏ –≤—ã –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω—ã –≤ —ç—Ç–æ–π —Å—Ç–∞—Ç—å–µ, [Dmitry Nozhenko](https://medium.com/@dmitrynozhenko) –æ–ø—É–±–ª–∏–∫—É–µ—Ç –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å –æ–± –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ source map. –ò—Ç–∞–∫, –Ω–∞–∂–∏–º–∞–π—Ç–µ –±–æ–ª—å—à–µ –ª–∞–π–∫–æ–≤ –∏ –ø–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ [Dmitry Nozhenko](https://medium.com/@dmitrynozhenko), —á—Ç–æ–±—ã –Ω–µ –ø—Ä–æ–ø—É—Å—Ç–∏—Ç—å –≤—Ç–æ—Ä—É—é —á–∞—Å—Ç—å.




**5. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ** **Sentry** **—Å –∫–æ–Ω–µ—á–Ω–æ–π —Ç–æ—á–∫–æ–π** **API**

–û–∫–µ–π. –ú—ã —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–ª–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ javascript –≤ –ø—Ä–µ–¥—ã–¥—É—â–∏—Ö –ø—É–Ω–∫—Ç–∞—Ö. –û–¥–Ω–∞–∫–æ, —á—Ç–æ –º—ã –±—É–¥–µ–º –¥–µ–ª–∞—Ç—å —Å –æ—à–∏–±–∫–∞–º–∏ XHR?

Sentry —Ç–∞–∫–∂–µ –∏–º–µ–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫—É—é –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫. –Ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–ª –µ–≥–æ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –æ—à–∏–±–æ–∫ api.

```
Sentry.captureException(err)
```

–í—ã –º–æ–∂–µ—Ç–µ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –∏–º—è –æ—à–∏–±–∫–∏, —É—Ä–æ–≤–µ–Ω—å, –¥–æ–±–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ, —É–Ω–∏–∫–∞–ª—å–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ —Å –ø–æ–º–æ—â—å—é –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã –∏ —Ç. –¥.

```
superagent
  .get(`https://deezerdevs-deezer.p.rapidapi.com/search?q=${query}`)
  .set("X-RapidAPI-Key", #id_key)
  .end((err, response) => {
    if (err) {
      Sentry.configureScope(
        scope => scope
          .setUser({"email": "john.doe@example.com"})
          .setLevel("Error")
      );
      return Sentry.captureException(err);
    }

    if (response) {
      return dispatch(setList(response.body.data));
    }
  });
```

–Ø —Ö–æ—Ç–µ–ª –±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â—É—é —Ñ—É–Ω–∫—Ü–∏—é –¥–ª—è API catch.

```
import * as Sentry from "@sentry/browser";

export const apiCatch = (error, getState) => {
  const store = getState();
  const storeStringify = JSON.stringify(store);
  const { root: { user: { email } } } = store;

  Sentry.configureScope(
    scope => scope
      .setLevel("Error")
      .setUser({ email })
      .setExtra("store", storeStringify)
  );
	// Sentry.showReportDialog(); - If you want get users feedback on error
  return Sentry.captureException(error);
};
```

–ò–º–ø–æ—Ä—Ç–∏—Ä—É–π—Ç–µ —ç—Ç—É —Ñ—É–Ω–∫—Ü–∏—é –≤ –≤—ã–∑–æ–≤ api.

```
export default query => (dispatch, getState) => {
  superagent
    .get(`https://deezerdevs-deezer.p.rapidapi.com/search?q=${query}`)
    .set("X-RapidAPI-Key", #id_key)
    .end((error, response) => {
      if (error) {
        return apiCatch(error, getState)
      }

      if (response) {
        return dispatch(setList(response.body.data));
      }
    });
};
```

–î–∞–≤–∞–π—Ç–µ –ø—Ä–æ–≤–µ—Ä–∏–º –º–µ—Ç–æ–¥—ã:

- **setLevel** –ø–æ–∑–≤–æ–ª—è–µ—Ç –≤—Å—Ç–∞–≤–∏—Ç—å –æ—à–∏–±–∫—É —É—Ä–æ–≤–Ω—è –≤ –ø–∞–Ω–µ–ª—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞ sentry. –û–Ω –∏–º–µ–µ—Ç —Å–≤–æ–π—Å—Ç–≤–∞ ‚Äî ‚Äòfatal‚Äô, ‚Äòerror‚Äô, ‚Äòwarning‚Äô, ‚Äòlog‚Äô, ‚Äòinfo, ‚Äòdebug‚Äô, ‚Äòcritical‚Äô).
- **setUser** –ø–æ–º–æ–≥–∞–µ—Ç —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å –ª—é–±—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ (id, –∞–¥—Ä–µ—Å —ç–ª–µ–∫—Ç—Ä–æ–Ω–Ω–æ–π –ø–æ—á—Ç—ã, –ø–ª–∞–Ω –æ–ø–ª–∞—Ç—ã –∏ —Ç. –¥.).
- **setExtra** –ø–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–¥–∞—Ç—å –ª—é–±—ã–µ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –≤–∞–º –Ω—É–∂–Ω—ã, –Ω–∞–ø—Ä–∏–º–µ—Ä, –º–∞–≥–∞–∑–∏–Ω.

–ï—Å–ª–∏ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –æ—Ç–∑—ã–≤—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π –æ–± –æ—à–∏–±–∫–µ, –≤–∞–º —Å–ª–µ–¥—É–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å —Ñ—É–Ω–∫—Ü–∏—é showReportDialog.

```
Sentry.showReportDialog();
```


–í—ã–≤–æ–¥:

–°–µ–≥–æ–¥–Ω—è –º—ã –æ–ø–∏—Å–∞–ª–∏ –æ–¥–∏–Ω –∏–∑ —Å–ø–æ—Å–æ–±–æ–≤ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Sentry –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ React.

